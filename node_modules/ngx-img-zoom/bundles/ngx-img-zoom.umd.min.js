!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common")):"function"==typeof define&&define.amd?define("ngx-img-zoom",["exports","@angular/core","@angular/common"],t):t((e=e||self)["ngx-img-zoom"]={},e.ng.core,e.ng.common)}(this,function(e,t,i){"use strict";var s=function(){function e(){this.zoomMode=0}return e.prototype.setZoomBreakPoints=function(e){this.zoomBreakPoints=e},e.decorators=[{type:t.Injectable}],e.ctorParameters=function(){return[]},e}();var o=function(){function e(e,t){this.renderer=e,this.ngxZoomService=t,this.hide=!0,this._triggerAnimationIn=!1,this.notFirstTime=!1,this.showResult=!1,this.zoomIndex=0,this.zoomMode=this.ngxZoomService.zoomMode,this.enableZoom=!1,this.zoomBreakPoints=this.ngxZoomService.zoomBreakPoints}return Object.defineProperty(e.prototype,"imgStyle",{get:function(){return this._imgStyle},set:function(e){this._imgStyle=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resultStyle",{get:function(){return this._resultStyle},set:function(e){this._resultStyle=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lensStyle",{get:function(){return this._lensStyle},set:function(e){this._lensStyle=e,this.notFirstTime&&this.imageZoom()},enumerable:!0,configurable:!0}),e.prototype.onscroll=function(e){this.hide=!0,this.renderer.setStyle(this.lens,"visibility","hidden")},e.prototype.onclick=function(e){this.hide=!0,this.renderer.setStyle(this.lens,"visibility","hidden")},Object.defineProperty(e.prototype,"_imgSrc",{set:function(e){this.zoomImage=e,!0===this.notFirstTime&&this.renderer.setStyle(this.result,"backgroundImage","url('"+e+"')"),this.notFirstTime=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_zoomImage",{set:function(e){var t=this;this.previewImage=e,this.showResult=!1;var i=new Image;i.src=this.zoomImage,i.onload=function(){t.showResult=!0}},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){},e.prototype.handleZoomOutOnMouseWheelUp=function(){this.enableZoom&&(this.zoomBreakPoints.length-1>this.zoomIndex&&this.zoomIndex++,this.lensStyle="height: "+this.zoomBreakPoints[this.zoomIndex].h+"px; width: "+this.zoomBreakPoints[this.zoomIndex].w+"px;",this.imageZoom(),this.moveLens(this.lastEventBeforeTheWheel))},e.prototype.handleZoomInOnMouseWheelUp=function(){this.enableZoom&&(this.zoomIndex>0&&this.zoomIndex--,this.lensStyle="height: "+this.zoomBreakPoints[this.zoomIndex].h+"px; width: "+this.zoomBreakPoints[this.zoomIndex].w+"px;",this.imageZoom(),this.moveLens(this.lastEventBeforeTheWheel))},e.prototype.ngAfterViewInit=function(){this.img=this.imgElmRef.nativeElement,this.result=this.resultElmRef.nativeElement,this.container=this.containerElmRef.nativeElement,this.renderer.setAttribute(this.img,"style",this.imgStyle),this.renderer.setAttribute(this.result,"style",this.resultStyle),this.renderer.setAttribute(this.container,"style",this.containerStyle),this.imageZoom(),this.lensMouseMoveListener=this.renderer.listen(this.lens,"mousemove",this.moveLens.bind(this)),this.imgMouseMoveListener=this.renderer.listen(this.img,"mousemove",this.moveLens.bind(this)),this.imgTouchMoveListener=this.renderer.listen(this.img,"touchmove",this.moveLens.bind(this)),this.lensTouchMoveListener=this.renderer.listen(this.lens,"touchmove",this.moveLens.bind(this)),this.renderer.setStyle(this.lens,"visibility","hidden")},e.prototype.ngOnDestroy=function(){this.lensMouseMoveListener&&this.lensMouseMoveListener(),this.imgMouseMoveListener&&this.imgMouseMoveListener(),this.imgTouchMoveListener&&this.imgTouchMoveListener(),this.lensTouchMoveListener&&this.lensTouchMoveListener()},e.prototype.imageZoom=function(){this.lens||(this.lens=this.renderer.createElement("DIV"),this.renderer.addClass(this.lens,"img-zoom-lens"),this.renderer.insertBefore(this.img.parentElement,this.lens,this.img)),this.renderer.setAttribute(this.lens,"style",this.lensStyle),this.cx=this.result.offsetWidth/this.lens.offsetWidth,this.cy=this.result.offsetHeight/this.lens.offsetHeight,this.renderer.setStyle(this.result,"backgroundImage","url('"+this.zoomImage+"')"),this.renderer.setStyle(this.result,"backgroundSize",this.img.width*this.cx+"px "+this.img.height*this.cy+"px")},e.prototype.moveLens=function(e){var t,i,s;this.lastEventBeforeTheWheel=e,e.preventDefault(),i=(t=this.getCursorPos(e)).x-this.lens.offsetWidth/2,s=t.y-this.lens.offsetHeight/2,i>this.img.width-this.lens.offsetWidth?i=this.img.width-this.lens.offsetWidth:i<0&&(i=0),s>this.img.height-this.lens.offsetHeight?s=this.img.height-this.lens.offsetHeight:s<0&&(s=0),this.hide=!1,this.showResult&&(this.renderer.setStyle(this.lens,"left",i+"px"),this.renderer.setStyle(this.lens,"top",s+"px"),this.renderer.setStyle(this.result,"backgroundPosition","-"+i*this.cx+"px -"+s*this.cy+"px"),this.renderer.setStyle(this.lens,"visibility","visible"))},e.prototype.getCursorPos=function(e){var t,i=0,s=0;return e=e||window.event,t=this.img.getBoundingClientRect(),i=e.pageX-t.left,s=e.pageY-t.top,{x:i-=window.pageXOffset,y:s-=window.pageYOffset}},e.prototype.handleMouseLeave=function(){this.hide=!0,this.renderer.setStyle(this.lens,"visibility","hidden")},e.decorators=[{type:t.Component,args:[{selector:"ngx-img-zoom",template:'\n<div  class="img-zoom-container" #container>\n    <img id="myimage" class=\'cursor-crosshair\' [src]="previewImage" #img (mouseleave)="handleMouseLeave()" \n\tlibMouseWheel (mouseWheelUp)="handleZoomInOnMouseWheelUp()" (mouseWheelDown)="handleZoomOutOnMouseWheelUp()">\n\n    <div [ngClass]="{\'hide\': hide || !showResult}" \n        id="myresult" \n        class="img-zoom-result" \n        #result>\n    </div>\n</div>  ',styles:["*{box-sizing:border-box}.img-zoom-container{position:absolute}.cursor-crosshair{cursor:crosshair}.img-zoom-lens{pointer-events:none;position:absolute;border:1px solid #d4d4d4;width:40px;height:40px}.img-zoom-result{border:1px solid #d4d4d4;width:300px;height:300px}.hide{visibility:hidden}"]}]}],e.ctorParameters=function(){return[{type:t.Renderer2},{type:s}]},e.propDecorators={imgElmRef:[{type:t.ViewChild,args:["img",{static:!1}]}],resultElmRef:[{type:t.ViewChild,args:["result",{static:!1}]}],containerElmRef:[{type:t.ViewChild,args:["container",{static:!1}]}],enableZoom:[{type:t.Input}],imgStyle:[{type:t.Input}],resultStyle:[{type:t.Input}],lensStyle:[{type:t.Input}],containerStyle:[{type:t.Input}],onscroll:[{type:t.HostListener,args:["window:scroll",["$event"]]}],onclick:[{type:t.HostListener,args:["window:click",["$event.target"]]}],_imgSrc:[{type:t.Input,args:["zoomImageSrc"]}],_zoomImage:[{type:t.Input,args:["previewImageSrc"]}]},e}();var n=function(){function e(){this.mouseWheelUp=new t.EventEmitter,this.mouseWheelDown=new t.EventEmitter}return e.prototype.onMouseWheelChrome=function(e){this.mouseWheelFunc(e)},e.prototype.onMouseWheelFirefox=function(e){this.mouseWheelFunc(e)},e.prototype.onMouseWheelIE=function(e){this.mouseWheelFunc(e)},e.prototype.mouseWheelFunc=function(e){var t=window.event||e,i=Math.max(-1,Math.min(1,t.wheelDelta||-t.detail));i>0?this.mouseWheelUp.emit(t):i<0&&this.mouseWheelDown.emit(t),t.returnValue=!1,t.preventDefault&&t.preventDefault()},e.decorators=[{type:t.Directive,args:[{selector:"[libMouseWheel]"}]}],e.propDecorators={mouseWheelUp:[{type:t.Output}],mouseWheelDown:[{type:t.Output}],onMouseWheelChrome:[{type:t.HostListener,args:["mousewheel",["$event"]]}],onMouseWheelFirefox:[{type:t.HostListener,args:["DOMMouseScroll",["$event"]]}],onMouseWheelIE:[{type:t.HostListener,args:["onmousewheel",["$event"]]}]},e}();var r=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{imports:[i.CommonModule],providers:[s],declarations:[o,n],exports:[o]}]}],e}();e.NgxImgZoomComponent=o,e.NgxImgZoomModule=r,e.NgxImgZoomService=s,e.Éµa=n,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-img-zoom.umd.min.js.map